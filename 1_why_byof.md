なぜフレームワークを自作するのか
==========================

Status: draft

READMEに言いたいことを書いてしまいましたが、もう一度、なぜフレームワークを自作するのかについて考えてみます。どんなフレームワークが欲しいのかを明確にします。

なぜ、自作？
-------------

答え：長期間にわたってサポートをするため。

例えば作ってから10年ほどサポートする場合。極端な話では、10年後に「ちょっと修正して欲しいのだけど」と言われるようなケース。

ちょっとした文言修正ならOK。完全に書き換えるぐらいの大きな修正でも、まぁ交渉次第で作り直せるかも。でも微妙な場合は、修正のみでコストを抑えたい、とかになった場合。

覚えちゃいないが、コードやドキュメントを見ながら思い出すわけだから、そんな時にどんなフレームワークを使ってたら楽なのだろう、というのが発想のもとになる。

フレームワークに求めること
-----------------------------

### 明確な設計方針

シンプルなフレームワークならサポートしやすいですよね。
でもシンプルとはなんだろう？

コードが少ないこと？

分かりやすい設計方針があること、と考えます。

設計方針さえ理解すれば、こんな風に動いているはず、と言って修正できる様になるはず。

もちろん設計方針は合理的でないとダメですよね。そして一貫していること。そうすれば10年後でも、思い出すなり再理解するなりしやすいはずです。そしてコードの流れも一貫していて追いかけやすいはず、です。


### 疎結合であること

修正すると、あちこちに影響が出ると大変。少々コードをいじっても、壊れにくいコードのほうがサポートしやすい。

これは、疎結合であること、だと思う。

継承が密結合なのは、やっと理解した。
で、疎結合、と言うのはコンポーネントやオブジェクト間の繋がりがゆるいことなわけだけど、まぁインターフェースでつながったりする。できれば、第三の汎用的な場所を介して、値（文字列とか配列）とかをやりとりするのが一番疎結合な気がする。


### 驚くような機能がないこと

マジックなフレームワークは使うと便利。
でもブラックマジック（知らない副作用）になりがち。
やはり、ホワイト・マジック（理解している副作用）でありたい。

壊れにくいこと、の言い換えです。


### 全ての機能を実装しない

フレームワークと言っても、全てに対応する必要はない、と思う。

MVCで言えば、M（モデル）とVC（ビューとコントローラー）は分離していていいと思う。ここでモデルはドメイン（エンティティ）とかインフラ（ORMとか）の部分。コントローラーとモデルの間に薄いレイヤーを挟み込む感じ。

ビューとコントローラーは分離…出来るかなぁ。


